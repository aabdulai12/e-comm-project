<h1>Order Details</h1>

<table class="table">
  <tr>
    <th>First Name</th>
    <td><%= @order.first_name %></td>
  </tr>
  <tr>
    <th>Last Name</th>
    <td><%= @order.last_name %></td>
  </tr>
  <tr>
    <th>Email</th>
    <td><%= @order.email %></td>
  </tr>
  <tr>
    <th>Address</th>
    <td><%= @order.address %></td>
  </tr>
  <tr>
    <th>City</th>
    <td><%= @order.city %></td>
  </tr>
  <tr>
    <th>Postal Code</th>
    <td><%= @order.postal_code %></td>
  </tr>
  <tr>
    <th>Province</th>
    <td><%= @order.province.name %></td>
  </tr>
</table>

<h2>Products</h2>
<table class="table">
  <thead>
    <tr>
      <th>Item</th>
      <th>Quantity</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
    <% @order.order_items.each do |item| %>
      <tr>
        <td><%= item.product.name %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.price) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<% taxes = @order.calculate_taxes %>

<h3>Totals</h3>
<table class="table">
  <tr>
    <th>Sub Total:</th>
    <td><%= number_to_currency(taxes[:subtotal]) %></td>
  </tr>
  <tr>
    <th>GST:</th>
    <td><%= number_to_currency(taxes[:gst]) %></td>
  </tr>
  <tr>
    <th>PST:</th>
    <td><%= number_to_currency(taxes[:pst]) %></td>
  </tr>
  <tr>
    <th>HST:</th>
    <td><%= number_to_currency(taxes[:hst]) %></td>
  </tr>
  <tr>
    <th>Total:</th>
    <td><%= number_to_currency(taxes[:total]) %></td>
  </tr>
</table>


<%= link_to 'Proceed to Checkout', checkout_path(order_id: @order.id), class: "btn btn-primary" %>
